{"ast":null,"code":"import { FERAL_REG_EXP, TypeError, construct, defineProperties, getOwnPropertyDescriptor, speciesSymbol } from './commons.js';\nexport default function tameRegExpConstructor() {\n  let regExpTaming = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'safe';\n\n  if (regExpTaming !== 'safe' && regExpTaming !== 'unsafe') {\n    throw new TypeError(`unrecognized regExpTaming ${regExpTaming}`);\n  }\n\n  const RegExpPrototype = FERAL_REG_EXP.prototype;\n\n  const makeRegExpConstructor = function () {\n    let _ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    // RegExp has non-writable static properties we need to omit.\n    const ResultRegExp = function RegExp() {\n      for (var _len = arguments.length, rest = new Array(_len), _key = 0; _key < _len; _key++) {\n        rest[_key] = arguments[_key];\n      }\n\n      if (new.target === undefined) {\n        return FERAL_REG_EXP(...rest);\n      }\n\n      return construct(FERAL_REG_EXP, rest, new.target);\n    };\n\n    defineProperties(ResultRegExp, {\n      length: {\n        value: 2\n      },\n      prototype: {\n        value: RegExpPrototype,\n        writable: false,\n        enumerable: false,\n        configurable: false\n      },\n      [speciesSymbol]: getOwnPropertyDescriptor(FERAL_REG_EXP, speciesSymbol)\n    });\n    return ResultRegExp;\n  };\n\n  const InitialRegExp = makeRegExpConstructor();\n  const SharedRegExp = makeRegExpConstructor();\n\n  if (regExpTaming !== 'unsafe') {\n    delete RegExpPrototype.compile;\n  }\n\n  defineProperties(RegExpPrototype, {\n    constructor: {\n      value: SharedRegExp\n    }\n  });\n  return {\n    '%InitialRegExp%': InitialRegExp,\n    '%SharedRegExp%': SharedRegExp\n  };\n}","map":{"version":3,"names":["FERAL_REG_EXP","TypeError","construct","defineProperties","getOwnPropertyDescriptor","speciesSymbol","tameRegExpConstructor","regExpTaming","RegExpPrototype","prototype","makeRegExpConstructor","_","ResultRegExp","RegExp","rest","new","target","undefined","length","value","writable","enumerable","configurable","InitialRegExp","SharedRegExp","compile","constructor"],"sources":["/Users/carlostrigoseguin/Documents/KRYHA/agoric/character-builder-repo/ui/node_modules/ses/src/tame-regexp-constructor.js"],"sourcesContent":["import {\n  FERAL_REG_EXP,\n  TypeError,\n  construct,\n  defineProperties,\n  getOwnPropertyDescriptor,\n  speciesSymbol,\n} from './commons.js';\n\nexport default function tameRegExpConstructor(regExpTaming = 'safe') {\n  if (regExpTaming !== 'safe' && regExpTaming !== 'unsafe') {\n    throw new TypeError(`unrecognized regExpTaming ${regExpTaming}`);\n  }\n  const RegExpPrototype = FERAL_REG_EXP.prototype;\n\n  const makeRegExpConstructor = (_ = {}) => {\n    // RegExp has non-writable static properties we need to omit.\n    const ResultRegExp = function RegExp(...rest) {\n      if (new.target === undefined) {\n        return FERAL_REG_EXP(...rest);\n      }\n      return construct(FERAL_REG_EXP, rest, new.target);\n    };\n\n    defineProperties(ResultRegExp, {\n      length: { value: 2 },\n      prototype: {\n        value: RegExpPrototype,\n        writable: false,\n        enumerable: false,\n        configurable: false,\n      },\n      [speciesSymbol]: getOwnPropertyDescriptor(FERAL_REG_EXP, speciesSymbol),\n    });\n    return ResultRegExp;\n  };\n\n  const InitialRegExp = makeRegExpConstructor();\n  const SharedRegExp = makeRegExpConstructor();\n\n  if (regExpTaming !== 'unsafe') {\n    delete RegExpPrototype.compile;\n  }\n  defineProperties(RegExpPrototype, {\n    constructor: { value: SharedRegExp },\n  });\n\n  return {\n    '%InitialRegExp%': InitialRegExp,\n    '%SharedRegExp%': SharedRegExp,\n  };\n}\n"],"mappings":"AAAA,SACEA,aADF,EAEEC,SAFF,EAGEC,SAHF,EAIEC,gBAJF,EAKEC,wBALF,EAMEC,aANF,QAOO,cAPP;AASA,eAAe,SAASC,qBAAT,GAAsD;EAAA,IAAvBC,YAAuB,uEAAR,MAAQ;;EACnE,IAAIA,YAAY,KAAK,MAAjB,IAA2BA,YAAY,KAAK,QAAhD,EAA0D;IACxD,MAAM,IAAIN,SAAJ,CAAe,6BAA4BM,YAAa,EAAxD,CAAN;EACD;;EACD,MAAMC,eAAe,GAAGR,aAAa,CAACS,SAAtC;;EAEA,MAAMC,qBAAqB,GAAG,YAAY;IAAA,IAAXC,CAAW,uEAAP,EAAO;;IACxC;IACA,MAAMC,YAAY,GAAG,SAASC,MAAT,GAAyB;MAAA,kCAANC,IAAM;QAANA,IAAM;MAAA;;MAC5C,IAAIC,GAAG,CAACC,MAAJ,KAAeC,SAAnB,EAA8B;QAC5B,OAAOjB,aAAa,CAAC,GAAGc,IAAJ,CAApB;MACD;;MACD,OAAOZ,SAAS,CAACF,aAAD,EAAgBc,IAAhB,EAAsBC,GAAG,CAACC,MAA1B,CAAhB;IACD,CALD;;IAOAb,gBAAgB,CAACS,YAAD,EAAe;MAC7BM,MAAM,EAAE;QAAEC,KAAK,EAAE;MAAT,CADqB;MAE7BV,SAAS,EAAE;QACTU,KAAK,EAAEX,eADE;QAETY,QAAQ,EAAE,KAFD;QAGTC,UAAU,EAAE,KAHH;QAITC,YAAY,EAAE;MAJL,CAFkB;MAQ7B,CAACjB,aAAD,GAAiBD,wBAAwB,CAACJ,aAAD,EAAgBK,aAAhB;IARZ,CAAf,CAAhB;IAUA,OAAOO,YAAP;EACD,CApBD;;EAsBA,MAAMW,aAAa,GAAGb,qBAAqB,EAA3C;EACA,MAAMc,YAAY,GAAGd,qBAAqB,EAA1C;;EAEA,IAAIH,YAAY,KAAK,QAArB,EAA+B;IAC7B,OAAOC,eAAe,CAACiB,OAAvB;EACD;;EACDtB,gBAAgB,CAACK,eAAD,EAAkB;IAChCkB,WAAW,EAAE;MAAEP,KAAK,EAAEK;IAAT;EADmB,CAAlB,CAAhB;EAIA,OAAO;IACL,mBAAmBD,aADd;IAEL,kBAAkBC;EAFb,CAAP;AAID"},"metadata":{},"sourceType":"module"}