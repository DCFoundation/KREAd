{"ast":null,"code":"/**\n * makeEvalFunction()\n * A safe version of the native eval function which relies on\n * the safety of safeEvaluate for confinement.\n *\n * @param {Function} safeEvaluate\n */\nexport const makeEvalFunction = safeEvaluate => {\n  // We use the the concise method syntax to create an eval without a\n  // [[Construct]] behavior (such that the invocation \"new eval()\" throws\n  // TypeError: eval is not a constructor\"), but which still accepts a\n  // 'this' binding.\n  const newEval = {\n    eval(source) {\n      if (typeof source !== 'string') {\n        // As per the runtime semantic of PerformEval [ECMAScript 18.2.1.1]:\n        // If Type(source) is not String, return source.\n        // TODO Recent proposals from Mike Samuel may change this non-string\n        // rule. Track.\n        return source;\n      }\n\n      return safeEvaluate(source);\n    }\n\n  }.eval;\n  return newEval;\n};","map":{"version":3,"names":["makeEvalFunction","safeEvaluate","newEval","eval","source"],"sources":["/Users/carlostrigoseguin/Documents/KRYHA/agoric/character-builder-repo/ui/node_modules/ses/src/make-eval-function.js"],"sourcesContent":["/**\n * makeEvalFunction()\n * A safe version of the native eval function which relies on\n * the safety of safeEvaluate for confinement.\n *\n * @param {Function} safeEvaluate\n */\nexport const makeEvalFunction = safeEvaluate => {\n  // We use the the concise method syntax to create an eval without a\n  // [[Construct]] behavior (such that the invocation \"new eval()\" throws\n  // TypeError: eval is not a constructor\"), but which still accepts a\n  // 'this' binding.\n  const newEval = {\n    eval(source) {\n      if (typeof source !== 'string') {\n        // As per the runtime semantic of PerformEval [ECMAScript 18.2.1.1]:\n        // If Type(source) is not String, return source.\n        // TODO Recent proposals from Mike Samuel may change this non-string\n        // rule. Track.\n        return source;\n      }\n      return safeEvaluate(source);\n    },\n  }.eval;\n\n  return newEval;\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,gBAAgB,GAAGC,YAAY,IAAI;EAC9C;EACA;EACA;EACA;EACA,MAAMC,OAAO,GAAG;IACdC,IAAI,CAACC,MAAD,EAAS;MACX,IAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;QAC9B;QACA;QACA;QACA;QACA,OAAOA,MAAP;MACD;;MACD,OAAOH,YAAY,CAACG,MAAD,CAAnB;IACD;;EAVa,EAWdD,IAXF;EAaA,OAAOD,OAAP;AACD,CAnBM"},"metadata":{},"sourceType":"module"}