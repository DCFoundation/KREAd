{"ast":null,"code":"// @ts-check\nimport { TypeError, globalThis, getOwnPropertyDescriptor, defineProperty } from './commons.js';\nexport function tameDomains() {\n  let domainTaming = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'safe';\n\n  if (domainTaming !== 'safe' && domainTaming !== 'unsafe') {\n    throw new TypeError(`unrecognized domainTaming ${domainTaming}`);\n  }\n\n  if (domainTaming === 'unsafe') {\n    return;\n  } // Protect against the hazard presented by Node.js domains.\n\n\n  if (typeof globalThis.process === 'object' && globalThis.process !== null) {\n    // Check whether domains were initialized.\n    const domainDescriptor = getOwnPropertyDescriptor(globalThis.process, 'domain');\n\n    if (domainDescriptor !== undefined && domainDescriptor.get !== undefined) {\n      // The domain descriptor on Node.js initially has value: null, which\n      // becomes a get, set pair after domains initialize.\n      throw new TypeError(`SES failed to lockdown, Node.js domains have been initialized (SES_NO_DOMAINS)`);\n    } // Prevent domains from initializing.\n    // This is clunky because the exception thrown from the domains package does\n    // not direct the user's gaze toward a knowledge base about the problem.\n    // The domain module merely throws an exception when it attempts to define\n    // the domain property of the process global during its initialization.\n    // We have no better recourse because Node.js uses defineProperty too.\n\n\n    defineProperty(globalThis.process, 'domain', {\n      value: null,\n      configurable: false,\n      writable: false,\n      enumerable: false\n    });\n  }\n}","map":{"version":3,"names":["TypeError","globalThis","getOwnPropertyDescriptor","defineProperty","tameDomains","domainTaming","process","domainDescriptor","undefined","get","value","configurable","writable","enumerable"],"sources":["/Users/carlostrigoseguin/Documents/KRYHA/agoric/character-builder-repo/ui/node_modules/ses/src/tame-domains.js"],"sourcesContent":["// @ts-check\n\nimport {\n  TypeError,\n  globalThis,\n  getOwnPropertyDescriptor,\n  defineProperty,\n} from './commons.js';\n\nexport function tameDomains(domainTaming = 'safe') {\n  if (domainTaming !== 'safe' && domainTaming !== 'unsafe') {\n    throw new TypeError(`unrecognized domainTaming ${domainTaming}`);\n  }\n\n  if (domainTaming === 'unsafe') {\n    return;\n  }\n\n  // Protect against the hazard presented by Node.js domains.\n  if (typeof globalThis.process === 'object' && globalThis.process !== null) {\n    // Check whether domains were initialized.\n    const domainDescriptor = getOwnPropertyDescriptor(\n      globalThis.process,\n      'domain',\n    );\n    if (domainDescriptor !== undefined && domainDescriptor.get !== undefined) {\n      // The domain descriptor on Node.js initially has value: null, which\n      // becomes a get, set pair after domains initialize.\n      throw new TypeError(\n        `SES failed to lockdown, Node.js domains have been initialized (SES_NO_DOMAINS)`,\n      );\n    }\n    // Prevent domains from initializing.\n    // This is clunky because the exception thrown from the domains package does\n    // not direct the user's gaze toward a knowledge base about the problem.\n    // The domain module merely throws an exception when it attempts to define\n    // the domain property of the process global during its initialization.\n    // We have no better recourse because Node.js uses defineProperty too.\n    defineProperty(globalThis.process, 'domain', {\n      value: null,\n      configurable: false,\n      writable: false,\n      enumerable: false,\n    });\n  }\n}\n"],"mappings":"AAAA;AAEA,SACEA,SADF,EAEEC,UAFF,EAGEC,wBAHF,EAIEC,cAJF,QAKO,cALP;AAOA,OAAO,SAASC,WAAT,GAA4C;EAAA,IAAvBC,YAAuB,uEAAR,MAAQ;;EACjD,IAAIA,YAAY,KAAK,MAAjB,IAA2BA,YAAY,KAAK,QAAhD,EAA0D;IACxD,MAAM,IAAIL,SAAJ,CAAe,6BAA4BK,YAAa,EAAxD,CAAN;EACD;;EAED,IAAIA,YAAY,KAAK,QAArB,EAA+B;IAC7B;EACD,CAPgD,CASjD;;;EACA,IAAI,OAAOJ,UAAU,CAACK,OAAlB,KAA8B,QAA9B,IAA0CL,UAAU,CAACK,OAAX,KAAuB,IAArE,EAA2E;IACzE;IACA,MAAMC,gBAAgB,GAAGL,wBAAwB,CAC/CD,UAAU,CAACK,OADoC,EAE/C,QAF+C,CAAjD;;IAIA,IAAIC,gBAAgB,KAAKC,SAArB,IAAkCD,gBAAgB,CAACE,GAAjB,KAAyBD,SAA/D,EAA0E;MACxE;MACA;MACA,MAAM,IAAIR,SAAJ,CACH,gFADG,CAAN;IAGD,CAZwE,CAazE;IACA;IACA;IACA;IACA;IACA;;;IACAG,cAAc,CAACF,UAAU,CAACK,OAAZ,EAAqB,QAArB,EAA+B;MAC3CI,KAAK,EAAE,IADoC;MAE3CC,YAAY,EAAE,KAF6B;MAG3CC,QAAQ,EAAE,KAHiC;MAI3CC,UAAU,EAAE;IAJ+B,CAA/B,CAAd;EAMD;AACF"},"metadata":{},"sourceType":"module"}