{"ast":null,"code":"// @ts-check\n/// <reference types=\"ses\"/>\nimport { assertChecker, checkTagRecord, PASS_STYLE, checkNormalProperty } from './passStyle-helpers.js';\nconst {\n  details: X\n} = assert;\nconst {\n  ownKeys\n} = Reflect;\nconst {\n  getPrototypeOf,\n  prototype: objectPrototype\n} = Object;\n/**\n *\n * @type {import('./internal-types.js').PassStyleHelper}\n */\n\nexport const TaggedHelper = harden({\n  styleName: 'tagged',\n  canBeValid: function (candidate) {\n    let check = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x => x;\n    return checkTagRecord(candidate, 'tagged', check);\n  },\n  assertValid: (candidate, passStyleOfRecur) => {\n    TaggedHelper.canBeValid(candidate, assertChecker);\n    assert.equal(getPrototypeOf(candidate), objectPrototype, X`Unexpected prototype for: ${candidate}`);\n    const {\n      [PASS_STYLE]: _passStyle,\n      // checkTagRecord already checked\n      [Symbol.toStringTag]: _label,\n      // checkTagRecord already checked\n      payload: _payload,\n      // value checked by recursive walk at the end\n      ...rest\n    } = candidate;\n    assert(ownKeys(rest).length === 0, X`Unexpected properties on Remotable Proto ${ownKeys(rest)}`);\n    checkNormalProperty(candidate, 'payload', 'string', true, assertChecker); // Recursively validate that each member is passable.\n\n    !!passStyleOfRecur(candidate.payload);\n  }\n});","map":{"version":3,"names":["assertChecker","checkTagRecord","PASS_STYLE","checkNormalProperty","details","X","assert","ownKeys","Reflect","getPrototypeOf","prototype","objectPrototype","Object","TaggedHelper","harden","styleName","canBeValid","candidate","check","x","assertValid","passStyleOfRecur","equal","_passStyle","Symbol","toStringTag","_label","payload","_payload","rest","length"],"sources":["/Users/carlostrigoseguin/Documents/KRYHA/agoric/character-builder-repo/ui/node_modules/@endo/marshal/src/helpers/tagged.js"],"sourcesContent":["// @ts-check\n\n/// <reference types=\"ses\"/>\n\nimport {\n  assertChecker,\n  checkTagRecord,\n  PASS_STYLE,\n  checkNormalProperty,\n} from './passStyle-helpers.js';\n\nconst { details: X } = assert;\nconst { ownKeys } = Reflect;\nconst { getPrototypeOf, prototype: objectPrototype } = Object;\n\n/**\n *\n * @type {import('./internal-types.js').PassStyleHelper}\n */\nexport const TaggedHelper = harden({\n  styleName: 'tagged',\n\n  canBeValid: (candidate, check = x => x) =>\n    checkTagRecord(candidate, 'tagged', check),\n\n  assertValid: (candidate, passStyleOfRecur) => {\n    TaggedHelper.canBeValid(candidate, assertChecker);\n    assert.equal(\n      getPrototypeOf(candidate),\n      objectPrototype,\n      X`Unexpected prototype for: ${candidate}`,\n    );\n\n    const {\n      [PASS_STYLE]: _passStyle, // checkTagRecord already checked\n      [Symbol.toStringTag]: _label, // checkTagRecord already checked\n      payload: _payload, // value checked by recursive walk at the end\n      ...rest\n    } = candidate;\n\n    assert(\n      ownKeys(rest).length === 0,\n      X`Unexpected properties on Remotable Proto ${ownKeys(rest)}`,\n    );\n\n    checkNormalProperty(candidate, 'payload', 'string', true, assertChecker);\n\n    // Recursively validate that each member is passable.\n    !!passStyleOfRecur(candidate.payload);\n  },\n});\n"],"mappings":"AAAA;AAEA;AAEA,SACEA,aADF,EAEEC,cAFF,EAGEC,UAHF,EAIEC,mBAJF,QAKO,wBALP;AAOA,MAAM;EAAEC,OAAO,EAAEC;AAAX,IAAiBC,MAAvB;AACA,MAAM;EAAEC;AAAF,IAAcC,OAApB;AACA,MAAM;EAAEC,cAAF;EAAkBC,SAAS,EAAEC;AAA7B,IAAiDC,MAAvD;AAEA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,YAAY,GAAGC,MAAM,CAAC;EACjCC,SAAS,EAAE,QADsB;EAGjCC,UAAU,EAAE,UAACC,SAAD;IAAA,IAAYC,KAAZ,uEAAoBC,CAAC,IAAIA,CAAzB;IAAA,OACVlB,cAAc,CAACgB,SAAD,EAAY,QAAZ,EAAsBC,KAAtB,CADJ;EAAA,CAHqB;EAMjCE,WAAW,EAAE,CAACH,SAAD,EAAYI,gBAAZ,KAAiC;IAC5CR,YAAY,CAACG,UAAb,CAAwBC,SAAxB,EAAmCjB,aAAnC;IACAM,MAAM,CAACgB,KAAP,CACEb,cAAc,CAACQ,SAAD,CADhB,EAEEN,eAFF,EAGEN,CAAE,6BAA4BY,SAAU,EAH1C;IAMA,MAAM;MACJ,CAACf,UAAD,GAAcqB,UADV;MACsB;MAC1B,CAACC,MAAM,CAACC,WAAR,GAAsBC,MAFlB;MAE0B;MAC9BC,OAAO,EAAEC,QAHL;MAGe;MACnB,GAAGC;IAJC,IAKFZ,SALJ;IAOAX,MAAM,CACJC,OAAO,CAACsB,IAAD,CAAP,CAAcC,MAAd,KAAyB,CADrB,EAEJzB,CAAE,4CAA2CE,OAAO,CAACsB,IAAD,CAAO,EAFvD,CAAN;IAKA1B,mBAAmB,CAACc,SAAD,EAAY,SAAZ,EAAuB,QAAvB,EAAiC,IAAjC,EAAuCjB,aAAvC,CAAnB,CApB4C,CAsB5C;;IACA,CAAC,CAACqB,gBAAgB,CAACJ,SAAS,CAACU,OAAX,CAAlB;EACD;AA9BgC,CAAD,CAA3B"},"metadata":{},"sourceType":"module"}